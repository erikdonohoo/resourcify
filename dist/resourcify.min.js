/*! resourcify 18-11-2014 v0.1.0-alpha.1 */
!function(a,b){"use strict";function c(a,b){return new Function("return function (call) { return function "+a+" () { return call(this, arguments) }; };")()(Function.apply.bind(b))}function d(d,e,f){function g(b,d,f){if(!b||!d)throw k("badargs","Must supply a name and a url when constructing");this.url=e.when(d),this.name=b,this.config=f||{};var g=this;this.$$ResourceConstructor=c(this.name,function(b){a.extend(this,b),(g.config.constructor||a.noop).bind(this)(b)}),this.$$ResourceConstructor.$$builder=this}function h(a,b){if(!a.method||!a.name)throw k("badconfig","Request config must contain a HTTP method and a name");a.$Const=b,a.isInstance?b.prototype[a.name]=j(a):b[a.name]=j(a)}function i(c,e,f,g,h){var i={url:c,method:f.method};i.data=/^(POST|PUT|PATCH|DELETE)$/i.test(f.method)?e:b,d(i).then(function(b){if(f.isArray&&!a.isArray(b.data)||!f.isArray&&a.isArray(b.data))throw k("arrayobj","Saw array or object when expecting the opposite when making @{0} call to @{1}",f.method,c);f.isArray?a.forEach(b.data,function(a){e.push("object"==typeof a?new f.$Const(a):a)}):e="object"==typeof b.data?a.extend(e,b.data):b.data,e.$resolved=!0,e.$url=c,g(e),f.$defer.resolve(e)},function(a){h(a),f.$defer.reject(a)})}function j(b){return function(c,d,g){var h=this instanceof b.$Const?this:b.isArray?[]:new b.$Const({});return a.isFunction(c)?(g=d||a.noop,d=c,c={}):(c=c||{},d=d||a.noop,g=g||a.noop),b.$defer=e.defer(),h.$promise=b.$defer.promise,h.$resolved=!1,b.$Const.$$builder.url.then(function(a){i(f.replaceParams(c,a,h),h,b,d,g)},function(){throw k("urlresolution","Could not resolve URL for @{0}",b)}),h}}var k=a.$$minErr("Resourcify");return g.prototype.method=function(a,b){return this.$$ResourceConstructor.prototype[a]=b,this},g.prototype.request=function(a){return h(a,this.$$ResourceConstructor),this},g.prototype.create=function(){return this.$$ResourceConstructor},g}function e(a){var b={},c=a.substring(a.indexOf("?"));return c!==a&&c.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b}function f(){function b(b,c,d){var f,g=/[\/=](:\w*[a-zA-Z]\w*)/,h=a.copy(c),i="__|cut|__";d=d||{};var j=e(h),k={};for(-1!==h.indexOf("?")&&(h=h.substring(0,h.indexOf("?"))),a.forEach(j,function(a,c){var e=a.substring(1);":"===a.charAt(0)&&(b[e]||d[e])?(k[c]=b[e]||d[e],delete b[e]):":"!==a.charAt(0)&&(k[c]=a)});f=g.exec(h);){var l=f[1],m=f[1].substring(1);if(h=h.replace(l,b[m]||d[m]||i),b[m])delete b[m];else if(-1!==h.indexOf("/"+i)){h=h.substring(0,h.indexOf("/"+i));break}}b=a.extend({},k,b);var n=[];return a.forEach(b,function(a,b){n.push(b+"="+a)}),h+=(n.length?"?":"")+n.join("&")}return{replaceParams:b}}a.module("resourcify",[]),d.$inject=["$http","$q","resourcifyUtils"],a.module("resourcify").service("Resourcify",d),a.module("resourcify").factory("resourcifyUtils",f)}(angular);